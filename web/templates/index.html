<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<link rel="stylesheet" href="/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
		<title>Backup Box</title>
	</head>
	<body class="mb-5">
		<div class="jumbotron jumbotron-fluid">
			<div class="container">
				<h1 class="display-4">Backup Box</h1>
				<div class="lead">Backupbox is running since <strong>{{ .uptime }}</strong>.</div>
				<div class="lead">Internal disk (where system is stored) usage is <strong>{{ .usage_internal }}</strong>.</div>
				<div class="lead">External disk (where back-ups are stored) usage is <strong>{{ .usage_external }}</strong>.</div>
			</div>
		</div>
		<div class="container">
			<div class="row">
				<div class="col-6">
					<h3 class="mb-4">Back-ups</h3>
					<div class="list-group">
						{{ range .backups }}
						<div class="list-group-item">
							<h4>{{ .computer }} → {{ .user }}</h4>
							<small>{{ .date }}</small>
						</div>
						{{ end }}
					</div>
				</div>
				<div class="col-6">
					<h3 class="mb-4">Ransomware protection</h3>
					<div class="list-group">
						{{ range .snapshots }}
						<div class="list-group-item">
							<div class="d-flex justify-content-between align-items-center">
								<h4>{{ .label }}</h4>
								<span class="badge badge-primary badge-pill">{{ .count }}</span>
							</div>
							<table class="table table-sm">
								<tbody>
									{{ range .list }}
									<tr>
										<td>{{ .date }}</td>
									</tr>
									{{ end }}
								</tbody>
							</table>
						</div>
						{{ end }}
					</div>
				</div>
			</div>
		</div>
		<hr class="my-5" />
		<div class="container">
			<h3 class="mb-4">Control</h3>
			<div class="row">
				<div class="col-md-6 mb-3">
					<div class="card border-secondary">
						<div class="card-body">
							<h5 class="card-title">Restart</h5>
							<p class="card-text">Restarts the backup box. This page might be unavailable for a moment.</p>
							<button class="btn btn-secondary" type="button" onclick="uiReboot()">Restart</button>
						</div>
					</div>
				</div>
				<div class="col-md-6 mb-3">
					<div class="card border-secondary">
						<div class="card-body">
							<h5 class="card-title">Shutdown</h5>
							<p class="card-text">Turns off the backup box. <strong>Unplug and replug the device to turn it back on.</strong></p>
							<button class="btn btn-secondary" type="button" onclick="uiShutdown()">Shutdown</button>
						</div>
					</div>
				</div>
				<div class="col-md-6 mb-3">
					<div class="card border-danger">
						<div class="card-body text-danger">
							<h5 class="card-title">Clean</h5>
							<p class="card-text">Cleans all ransomware protection snapshots. The may free up a considerable amount of disk space. However, make sure that the current back-up is not compromised (‟encrypted”) before you proceed (it will delete all safety copies).</p>
							<button class="btn btn-danger" type="button" onclick="uiClean()">Clean</button>
						</div>
					</div>
				</div>
				<div class="col-md-6 mb-3">
					<div class="card border-danger">
						<div class="card-body text-danger">
							<h5 class="card-title">Reset</h5>
							<p class="card-text">Completely resets the backup box. <strong class="text-uppercase">This will erase all back-ups and all ransomware protection snapshots.</strong> Only use this after you plugged in a new hard drive.</p>
							<button class="btn btn-danger d-flex align-items-center" type="button" onclick="uiReset()">
								Reset
								<svg class="ml-2" width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-exclamation-circle-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  									<path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
								</svg>
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="/js/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
		<script type="text/javascript" src="/js/ui.js"></script>
	</body>
</html>
